<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineExplorer - Navegador de Pel√≠culas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .api-setup {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid rgba(255, 193, 7, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            
        }

        .api-setup h3 {
            margin-bottom: 15px;
            color: #ffd54f;
        }

        .api-setup ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        .api-setup li {
            margin: 8px 0;
        }

        .api-setup a {
            color: #fff;
            text-decoration: underline;
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .api-input-group input {
            flex: 1;
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .api-input-group input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .api-input-group button {
            padding: 12px 30px;
            background: #ffc107;
            color: #333;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .api-input-group button:hover {
            background: #ffb300;
            transform: scale(1.05);
        }

        .search-box {
            background: rgba(255,255,255,0.1);
            
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .search-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-input-group input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
        }

        .search-input-group input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .search-input-group input:focus {
            outline: none;
            border-color: #a78bfa;
        }

        .btn-search {
            padding: 15px 35px;
            background: linear-gradient(135deg, #a78bfa, #ec4899);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-search:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(167, 139, 250, 0.4);
        }

        .btn-search:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .search-types {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-type {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-type:hover {
            background: rgba(255,255,255,0.2);
        }

        .btn-type.active {
            background: #a78bfa;
            transform: scale(1.05);
        }

        .suggestions {
            margin-bottom: 30px;
        }

        .suggestions h2 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .suggestion-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-suggestion {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-suggestion:hover {
            background: rgba(255,255,255,0.2);
            border-color: #a78bfa;
        }

        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid rgba(239, 68, 68, 0.5);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: #a78bfa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .results {
            margin-top: 30px;
        }

        .results h2 {
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .movie-card {
            background: rgba(255,255,255,0.1);
            
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .movie-card:hover {
            background: rgba(255,255,255,0.15);
            border-color: #a78bfa;
            box-shadow: 0 8px 30px rgba(167, 139, 250, 0.3);
        }

        .movie-content {
            display: flex;
            gap: 25px;
        }

        .movie-poster {
            width: 150px;
            height: 225px;
            border-radius: 10px;
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .movie-info {
            flex: 1;
        }

        .movie-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .movie-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .movie-meta {
            display: flex;
            gap: 20px;
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .rating {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.5);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .movie-genre {
            color: rgba(200, 150, 255, 1);
            margin-bottom: 15px;
        }

        .movie-plot {
            line-height: 1.6;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.9);
        }

        .movie-details {
            font-size: 0.9rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.8);
        }

        .movie-details strong {
            color: white;
        }

        .imdb-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background: rgba(167, 139, 250, 0.3);
            border-radius: 8px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }

        .imdb-link:hover {
            background: rgba(167, 139, 250, 0.5);
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üé¨ CineExplorer</h1>
            <p>Tu navegador inteligente de pel√≠culas</p>
        </div>

        <!-- API Setup -->
        <div id="apiSetup" class="api-setup">
            <h3>‚öôÔ∏è Configuraci√≥n de API</h3>
            <p>Para usar este navegador necesitas una API key gratuita de OMDb:</p>
            <ol>
                <li>Visita <a> href="http://www.omdbapi.com/apikey.aspx" target="_blank">www.omdbapi.com/apikey.aspx</a></li>
                <li>Selecciona "FREE" (1,000 b√∫squedas diarias)</li>
                <li>Ingresa tu email y haz clic en "Submit"</li>
                <li>Revisa tu email y activa tu API key</li>
                <li>Copia tu API key y p√©gala abajo</li>
            </ol>
            <div class="api-input-group">
                <input type="text" id="apiKeyInput" placeholder="Ingresa tu API key (ej: 12abc345)">
                <button onclick="saveApiKey()">Guardar</button>
            </div>
        </div>

        <!-- Search Box -->
        <div class="search-box">
            <div class="search-input-group">
                <input type="text" id="searchInput" placeholder="Busca pel√≠culas por t√≠tulo..." disabled>
                <button class="btn-search" onclick="handleSearch()" disabled id="searchBtn">üîç Buscar</button>
            </div>
            <div class="search-types">
                <button class="btn-type active" data-type="general" onclick="setSearchType('general')">üîç General</button>
                <button class="btn-type" data-type="trending" onclick="setSearchType('trending')">üìà Populares</button>
                <button class="btn-type" data-type="action" onclick="setSearchType('action')">üí• Acci√≥n</button>
                <button class="btn-type" data-type="comedy" onclick="setSearchType('comedy')">üòÑ Comedia</button>
            </div>
        </div>

        <!-- Error -->
        <div id="errorBox" class="error hidden"></div>

        <!-- Suggestions -->
        <div id="suggestions" class="suggestions hidden">
            <h2>‚ú® Prueba estas b√∫squedas</h2>
            <div class="suggestion-buttons">
                <button class="btn-suggestion" onclick="searchSuggestion('Inception')">Inception</button>
                <button class="btn-suggestion" onclick="searchSuggestion('The Matrix')">The Matrix</button>
                <button class="btn-suggestion" onclick="searchSuggestion('Interstellar')">Interstellar</button>
                <button class="btn-suggestion" onclick="searchSuggestion('Pulp Fiction')">Pulp Fiction</button>
                <button class="btn-suggestion" onclick="searchSuggestion('The Godfather')">The Godfather</button>
            </div>
        </div>

        <!-- Loading -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Buscando pel√≠culas...</p>
        </div>

        <!-- Results -->
        <div id="results" class="results hidden"></div>

        <!-- Footer -->
        <div class="footer">
            <p>üí° Tip: Busca por t√≠tulo exacto para mejores resultados</p>
            <p> style="font-size: 0.8rem; margin-top: 5px;">Datos proporcionados por OMDb API</p>
        </div>
    </div>

    <script>
        let apiKey = '';
        let searchType = 'general';

        function saveApiKey() {
            const input = document.getElementById('apiKeyInput');
            apiKey = input.value.trim();
            
            if (apiKey) {
                document.getElementById('apiSetup').classList.add('hidden');
                document.getElementById('searchInput').disabled = false;
                document.getElementById('searchBtn').disabled = false;
                document.getElementById('suggestions').classList.remove('hidden');
                hideError();
            } else {
                showError('Por favor ingresa una API key v√°lida');
            }
        }

        function setSearchType(type) {
            searchType = type;
            document.querySelectorAll('.btn-type').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function searchSuggestion(query) {
            document.getElementById('searchInput').value = query;
            searchType = 'general';
            handleSearch();
        }

        async function handleSearch() {
            if (!apiKey) {
                showError('Por favor configura tu API key primero');
                document.getElementById('apiSetup').classList.remove('hidden');
                return;
            }

            const query = document.getElementById('searchInput').value.trim();
            
            if (!query && searchType === 'general') {
                showError('Por favor ingresa un t√©rmino de b√∫squeda');
                return;
            }

            hideError();
            showLoading();

            try {
                let searchQuery;
                
                switch (searchType) {
                    case 'trending':
                        const popularMovies = ['Oppenheimer', 'Barbie', 'Dune', 'Avatar', 'Spider-Man'];
                        searchQuery = popularMovies[Math.floor(Math.random() * popularMovies.length)];
                        break;
                    case 'action':
                        const actionMovies = ['Mission Impossible', 'John Wick', 'Mad Max', 'Die Hard'];
                        searchQuery = actionMovies[Math.floor(Math.random() * actionMovies.length)];
                        break;
                    case 'comedy':
                        const comedyMovies = ['Superbad', 'The Hangover', 'Bridesmaids', 'Step Brothers'];
                        searchQuery = comedyMovies[Math.floor(Math.random() * comedyMovies.length)];
                        break;
                    default:
                        searchQuery = query;
                }

                const results = await searchMovies(searchQuery);
                displayResults(results);
            } catch (error) {
                showError(error.message);
                hideLoading();
            }
        }

        async function searchMovies(query) {
            const response = await fetch(
                `https://www.omdbapi.com/?apikey=${apiKey}&s=${encodeURIComponent(query)}&type=movie`
            );
            const data = await response.json();

            if (data.Response === 'True') {
                const detailedResults = await Promise.all(
                    data.Search.slice(0, 6).map(async (movie) => {
                        const detailResponse = await fetch(
                            `https://www.omdbapi.com/?apikey=${apiKey}&i=${movie.imdbID}&plot=full`
                        );
                        return await detailResponse.json();
                    })
                );
                return detailedResults;
            } else {
                throw new Error(data.Error || 'No se encontraron resultados');
            }
        }

        function displayResults(movies) {
            hideLoading();
            document.getElementById('suggestions').classList.add('hidden');
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.classList.remove('hidden');
            
            let html = `<h2>Resultados de b√∫squeda (${movies.length})</h2>`;
            
            movies.forEach(movie => {
                html += `
                    <div class="movie-card">
                        <div class="movie-content">
                            ${movie.Poster && movie.Poster !== 'N/A' ? 
                                `<img src="${movie.Poster}" alt="${movie.Title}" class="movie-poster">` : 
                                ''
                            }
                            <div class="movie-info">
                                <div class="movie-header">
                                    <div>
                                        <h3 class="movie-title">${movie.Title}</h3>
                                        <div class="movie-meta">
                                            <span>üìÖ ${movie.Year}</span>
                                            ${movie.Runtime && movie.Runtime !== 'N/A' ? 
                                                `<span>‚è±Ô∏è ${movie.Runtime}</span>` : 
                                                ''
                                            }
                                        </div>
                                    </div>
                                    ${movie.imdbRating && movie.imdbRating !== 'N/A' ? 
                                        `<div class="rating">‚≠ê ${movie.imdbRating}</div>` : 
                                        ''
                                    }
                                </div>
                                
                                ${movie.Genre && movie.Genre !== 'N/A' ? 
                                    `<p class="movie-genre">${movie.Genre}</p>` : 
                                    ''
                                }
                                
                                ${movie.Plot && movie.Plot !== 'N/A' ? 
                                    `<p class="movie-plot">${movie.Plot}</p>` : 
                                    ''
                                }
                                
                                <div class="movie-details">
                                    ${movie.Director && movie.Director !== 'N/A' ? 
                                        `<p><strong>Director:</strong> ${movie.Director}</p>` : 
                                        ''
                                    }
                                    ${movie.Actors && movie.Actors !== 'N/A' ? 
                                        `<p><strong>Actores:</strong> ${movie.Actors}</p>` : 
                                        ''
                                    }
                                    ${movie.Awards && movie.Awards !== 'N/A' ? 
                                        `<p><strong>Premios:</strong> ${movie.Awards}</p>` : 
                                        ''
                                    }
                                </div>
                                
                                ${movie.imdbID ? 
                                    `<a href="https://www.imdb.com/title/${movie.imdbID}" target="_blank" class="imdb-link">
                                        Ver en IMDb ‚Üí
                                    </a>` : 
                                    ''
                                }
                            </div>
                        </div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        function showError(message) {
            const errorBox = document.getElementById('errorBox');
            errorBox.textContent = '‚ùå ' + message;
            errorBox.classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('errorBox').classList.add('hidden');
        }

        function showLoading() {
            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('results').classList.add('hidden');
        }

        function hideLoading() {
            document.getElementById('loading').classList.add('hidden');
        }

        // Enter key support
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        document.getElementById('apiKeyInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                saveApiKey();
            }
        });
    </script>
</body>
</html>